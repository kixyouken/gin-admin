{{ define "css" }}
<style>
    .layui-input-prefix {
        width: 80px;
        padding: 0;
    }

    .layui-input-wrap .layui-input {
        padding-left: 80px !important;
    }

    .layui-input-inline {
        padding-left: 100px;
    }
</style>
{{ end }}

{{ define "content" }}

<div class="layui-row layui-col-space15">
    <div class="layui-col-md12">
        <div class="layui-card">
            <!-- <div class="layui-card-header">标题</div> -->
            <div class="layui-card-body">
                <form class="layui-form layui-row layui-col-space15">
                    <div class="layui-col-md3">
                        <div class="layui-input-wrap">
                            <div class="layui-input-prefix">
                                会員ID
                            </div>
                            <input type="text" name="id" value="" placeholder="请输入会員ID" class="layui-input"
                                lay-affix="clear">
                        </div>
                    </div>
                    <div class="layui-col-md3">
                        <div class="layui-input-wrap">
                            <div class="layui-input-prefix">
                                氏名
                            </div>
                            <input type="text" name="name" value="" placeholder="请输入氏名" class="layui-input"
                                lay-affix="clear">
                        </div>
                    </div>
                    <div class="layui-col-md3">
                        <div class="layui-input-wrap">
                            <div class="layui-input-prefix">
                                カナ
                            </div>
                            <input type="text" name="kana_name" value="" placeholder="请输入カナ" class="layui-input"
                                lay-affix="clear">
                        </div>
                    </div>
                    <div class="layui-col-md3">
                        <div class="layui-input-wrap">
                            <div class="layui-input-prefix">
                                大学名
                            </div>
                            <input type="text" name="university_name_opt" value="" placeholder="请输入大学名"
                                class="layui-input" lay-affix="clear">
                        </div>
                    </div>
                    <div class="layui-col-md3">
                        <div class="layui-input-wrap">
                            <div class="layui-input-prefix">
                                電話番号
                            </div>
                            <input type="text" name="mobile" value="" placeholder="请输入電話番号" class="layui-input"
                                lay-affix="clear">
                        </div>
                    </div>
                    <div class="layui-col-md3">
                        <div class="layui-input-wrap">
                            <div class="layui-input-prefix">
                                メール
                            </div>
                            <input type="text" name="email" value="" placeholder="请输入メール" class="layui-input"
                                lay-affix="clear">
                        </div>
                    </div>
                    <div class="layui-col-md3">
                        <div class="layui-input-wrap">
                            <div class="layui-input-prefix">
                                学部学科
                            </div>
                            <input type="text" name="faculty" value="" placeholder="请输入学部学科" class="layui-input"
                                lay-affix="clear">
                        </div>
                    </div>
                    <div class="layui-col-md3">
                        <div class="layui-input-wrap">
                            <div class="layui-input-prefix">
                                文理区分
                            </div>
                            <select name="type">
                                <option value=""></option>
                                <option value="1">文系</option>
                                <option value="2">理系</option>
                            </select>
                        </div>
                    </div>
                    <div class="layui-col-md12">
                        <div class="layui-input-wrap" style="border: 1px solid #f2f2f2;">
                            <div class="layui-input-prefix">
                                大学エリア
                            </div>
                            <div class="layui-input-inline">
                                <input type="checkbox" name="AAA" title="默认">
                                <input type="checkbox" name="BBB" lay-text="选中" checked>
                                <input type="checkbox" name="CCC" title="禁用" disabled>
                                <input type="checkbox" name="DDD" title="半选" id="ID-checkbox-ind">
                            </div>
                        </div>
                    </div>
                    <div class="layui-col-md3">
                        <div class="layui-input-wrap">
                            <div class="layui-input-prefix">
                                ランク
                            </div>
                            <select name="">
                                <option value=""></option>
                                <option value="1">文系</option>
                                <option value="2">理系</option>
                            </select>
                        </div>
                    </div>
                    <div class="layui-col-md3">
                        <div class="layui-input-wrap">
                            <div class="layui-input-prefix">
                                卒業年度
                            </div>
                            <input type="text" name="" id="graduation-date" placeholder="请选择卒業年度" class="layui-input"
                                lay-affix="clear">
                        </div>
                    </div>
                    <div class="layui-col-md3">
                        <div class="layui-input-wrap">
                            <div class="layui-input-prefix">
                                内定先
                            </div>
                            <input type="text" name="" value="" placeholder="请输入内定先" class="layui-input"
                                lay-affix="clear">
                        </div>
                    </div>
                    <div class="layui-col-md3">
                        <div class="layui-input-wrap">
                            <div class="layui-input-prefix">
                                ステータス
                            </div>
                            <select name="">
                                <option value=""></option>
                                <option value="1">文系</option>
                                <option value="2">理系</option>
                            </select>
                        </div>
                    </div>
                    <div class="layui-col-md3">
                        <div class="layui-input-wrap">
                            <div class="layui-input-prefix">
                                登録日
                            </div>
                            <input type="text" name="" id="lastlogin-date" placeholder="请选择登録日" class="layui-input"
                                lay-affix="clear">
                        </div>
                    </div>
                    <div class="layui-col-md12">
                        <div class="layui-input-wrap">
                            <input type="checkbox" name="" title="メール配信停止を除く" lay-skin="tag">
                            <input type="checkbox" name="" lay-text="TELNGを除く" lay-skin="tag">
                            <input type="checkbox" name="" title="退会を除く" lay-skin="tag">
                            <input type="checkbox" name="" title="AP内定を除く" lay-skin="tag">
                        </div>
                    </div>
                    <div class="layui-btn-container layui-col-xs12">
                        <button class="layui-btn" lay-submit lay-filter="users-table-search">Search</button>
                        <button type="reset" class="layui-btn layui-btn-primary">Clear</button>
                    </div>
                </form>
                <table class="layui-hide" id="users-table" lay-filter="users-table"></table>
            </div>
        </div>
    </div>
</div>

{{ end }}

{{ define "js" }}
<script type="text/html" id="users-tool">
    <div class="layui-clear-space">
        <a class="layui-btn layui-btn-xs" lay-event="edit">编辑</a>
    </div>
</script>

<script>
    layui.use(function () {
        var table = layui.table
            , form = layui.form
            , laydate = layui.laydate

        laydate.render({
            elem: "#graduation-date"
            , type: 'month'
            , range: true
        })

        laydate.render({
            elem: "#lastlogin-date"
            , range: true
        })

        table.render({
            elem: "#users-table"
            , url: "/user/data"
            , cols: [[
                { field: "id", title: "会員ID", width: 105 }
                , {
                    field: "", title: "氏名", templet: function (d) {
                        return d.family_name + " " + d.name
                    }, width: 140
                }
                , {
                    field: "", title: "フリガナ", templet: function (d) {
                        return d.kana_family_name + " " + d.kana_name
                    }, width: 140
                }
                , { field: "mobile", title: "携帯電話番号", width: 140 }
                , { field: "email", title: "メール", width: 180 }
                , {
                    field: "", title: "学校名", templet: function (d) {
                        if (d.master_university) {
                            return d.master_university.name
                        }
                        return d.university_name_opt
                    }, width: 180
                }
                , {
                    field: "", title: "卒業年度", templet: function (d) {
                        return d.graduation_year + "年" + d.graduation_month + "月"
                    }, width: 110
                }
                , {
                    field: "", title: "配信停止", templet: function (d) {
                        if (d.unsubscribe) {
                            return "NG"
                        }
                        return ""
                    }, width: 90
                }
                , {
                    field: "", title: "TELNG", templet: function (d) {
                        if (d.flag_telng) {
                            return "NG"
                        }
                        return ""
                    }, width: 80
                }
                , { field: "withdrawaled_at", title: "退会", width: 150 }
                , { field: "created_at", title: "作成日時", width: 150 }
                , { toolbar: "#users-tool", title: "操作" }
            ]]
            , page: true
        });

        // 搜索提交
        form.on('submit(users-table-search)', function (data) {
            var field = data.field; // 获得表单字段
            // 执行搜索重载
            table.reload('users-table', {
                page: {
                    // 重新从第 1 页开始
                    curr: 1
                },
                // 搜索的字段
                where: field
            });
            // 阻止默认 form 跳转
            return false;
        });
    });
</script>
{{ end }}